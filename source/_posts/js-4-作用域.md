---
title: js-4-作用域
date: 2020-12-22 10:19:15
top: true
tags:
- 作用域
categories:
- JavaScript
---
### 一、定义
<!--more-->
在 JavaScript 中, 作用域为可访问变量，对象，函数的集合。

作用域其实可理解为执行上下文中声明的变量和声明的作用范围。

### 二、分类

#### 2.1 全局作用域

全局作用域 − 全局变量定义在程序结构的外部，它可以在你代码的任何位置使用。

#### 2.2 类作用域

类作用域 − 这个变量也可以称为 字段。类变量声明在一个类里头，但在类的方法外面。 该变量可以通过类的对象来访问。类变量也可以是静态的，静态的变量可以通过类名直接访问。

```js
class class_name { 
    // 类作用域
}
```

#### 2.3 块级作用域

指在变量声明的代码段之外是不可见的。参考：ES6的let以及const。

#### 2.4 局部作用域

局部作用域 − 局部变量，局部变量只能在声明它的一个代码块（如：方法）中使用。

### 三、作用域链

一般情况下，变量取值到 创建 这个变量 的函数的作用域中取值。

但是如果在当前作用域中没有查到值，就会向上级作用域去查，直到查到全局作用域，这么一个查找过程形成的链条就叫做作用域链。

我们知道，我们可以在执行上下文中访问到父级甚至全局的变量，这便是作用域链的功劳。作用域链可以理解为一组对象列表，包含 父级和自身的变量对象，因此我们便能通过作用域链访问到父级里声明的变量或者函数。

由两部分组成:

- [[scope]]属性: 指向父级变量对象和作用域链，也就是包含了父级的[[scope]]和AO

- AO: 自身活动对象

如此 [[scopr]]包含[[scope]]，便自上而下形成一条 链式作用域。

```js
var num = 30;
function f1(){
    var num  = 20;
    function f2(){
        var num = 10;
        function f3(){
            var num = 5;
            console.log(num);
        }
        f3();
    }
   f2();
}
f1();
```

![scopechain001.jpg](http://alivnram-test.oss-cn-beijing.aliyuncs.com/alivnblog/scopechain001.jpg)



