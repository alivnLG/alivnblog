---
title: js重点知识-5-执行上下文
date: 2020-12-22 10:52:46
top: true
tags:
- 执行上下文
categories:
- JavaScript
---
### 一、定义
<!--more-->
当前JavaScript代码被解析和执行时所在环境，当我们调用一个函数的时候就会创建一个函数的环境，我们可以称之为执行环境，简单点也可称之为环境。当然，咱们在这里叫作执行上下文。当然，每个函数都会有各自的执行上下文。简单来说，就是函数里面的执行环境。执行上下文定义了变量或函数有权访问其他数据，决定了他们各自的行为 。

执行上下文可以简单理解为一个对象:

它包含三个部分:

- 变量对象(VO)

- 作用域链(词法作用域)

- this指向

### 二、分类

#### 2.1 全局执行上下文

记住全局执行上下文，只有一个即一个程序中只能有一个全局执行上下文，如果是在浏览器中，那么全局对象就是window对象，this指向就是这个全局对象

#### 2.2 函数执行上下文

函数执行上下文可以存在多个，甚至是无数个；只有在函数被调用时才会被创建（函数执行上下文），每次调用函数都会创建一个新的执行上下文

#### 2.3 Eval函数执行上下文

在eval函数中的代码才有eval函数执行上下文，理解了执行上下文（即环境），那么需要了解在JavaScript程序中的执行流，以及控制机制（执行堆栈）流程。

### 三、代码执行过程分析

代码执行过程:

- （1）创建 全局上下文 (global EC)

- （2）全局执行上下文 (caller) 逐行 自上而下 执行。遇到函数时，函数执行上下文 (callee) 被push到执行栈顶层

- （3）函数执行上下文被激活，成为 active EC, 开始执行函数中的代码，caller 被挂起

- （4）函数执行完后，callee 被pop移除出执行栈，控制权交还全局上下文 (caller)，继续执行








