---
title: 提高代码整洁的方法
date: 2020-12-09 10:51:52
tags:
- js
categories:
- Javascript
---

#### 一、可读的代码是可维护的

作为一名开发人员，我的目标是编写高质量的代码。团队中的每个开发人员，不管他/她的技术水平如何，都必须能够通过阅读理解我所写的代码。代码的可读性有助于年轻的开发人员编写代码时更加自信。
<!--more-->
#### 二、删除不必要的代码注释

不需要任何注释来解释这个接收 X 个数组并将它们合并到一个新的数组中的函数。

```js
function mergeArrays(...arrays) {
  let mergedArray = []

  arrays.forEach(array => {
      mergedArray = [...mergedArray, ...array]
  })

  return mergedArray
}
```

像示例代码，如果增添文档并不能提高可读性。我希望团队成员知道展开操作符是什么。如果他们不清楚，他们应该在代码审查 code review 时来问我。

当然，我们不要忘记注释的代码块。如果我们忘记了，这里只有一个解决方案：删除代码。既然了不起的 git 可以检出旧代码，那么为什么还要把它留在注释中呢？

请停止把你的代码库变成垃圾场。

#### 三、重视命名

如果你看到函数名 mergeArrays，就应该很清楚地知道这是一个将 X 个数组组合成一个新的数组的函数。

我知道命名是件难事。函数越复杂，命名就越难… 我有个法子让命名更容易，举个例子：有一个函数，它会合并两个数组并生成一个新的唯一的数字列表。你会怎么命名？是下面这样吗？

```js
function mergeNumberListIntoUniqueList(listOne, listTwo) {
  return [...new Set([...listOne, ...listTwo])]
}
```

mergeNumberListIntoUniqueList 这个名字并没有那么糟糕，至少功能如其名。命名的难点在于这个函数要做两件事：一个函数做的事情越多，命名它就越困难。将这个函数拆分为两个单独的函数，命名会更容易且函数复用更容易。

```js
function mergeLists(listOne, listTwo) {
  return [...listOne, ...listTwo]
}

function createUniqueList(list) {
  return [...new Set(list)]
}
```

当然，不需要调用新函数就可以很容易地创建美观的一行代码。但有时，一行代码的可读性并不高。

#### 四、If 语句

```js
if(value === 'duck' || value === 'dog' || value === 'cat') {
  // ...
}
```

改写

```js
const options = ['duck', 'dog', 'cat'];
if (options.includes(value)) {
  // ...
}
```

#### 五、提前退出机制

```js
function handleEvent(event) {
  if (event) {
    const target = event.target;
    if (target) {
      // Your awesome piece of code that uses target
    }
  }
}
```

来我们检查下对象 event 是否为真，以及属性 target 是否可用。问题是上面代码我们已经用了两个 if 语句。

让我们看看如何在这里实现 “提前退出”。

```js
function handleEvent(event) {
  if (!event || !event.target) {
    return;
  }
  // Your awesome piece of code that uses target
}
```

在这里用 “提前退出”，你可以检查是否 event 和 event.target 同时非假 。很明显，我们确信这一事件 event.target 非假。因为如果这个语句为假，程序就不会执行其他代码。

#### 六、解构赋值

在 JavaScript 中，我们可以解构数据和对象。

解构赋值语法是一种 JavaScript 表达式。通过解构赋值，可以将值从数组、属性从对象中取出，赋值给其他变量。

```js
// Destructuring an object
const numbers = {one: 1, two: 2};
const {one, two} = numbers;
console.log(one); // 1
console.log(two); // 2

// Destructuring an array
const numbers = [1, 2, 3, 4, 5];
const [one, two] = numbers;
console.log(one); // 1
console.log(two); // 2
```

解构的问题在于，它有时会为属性创建一个不好的命名。最好的例子是从 API 获取数据并接收具有 data 属性的响应对象。

```js
const url = "http://localhost:8080/api/v1/organizers/1"
const response = await axios.get(url)
const {name} = response.data
```

这个代码示例说明你正在获取 id 为 1 的 organizer。organizer 对象有一个名字，你可以解构它。这样做没什么问题。

这段代码可以正常运行。但是为什么属性名还是 name? 那将是整个范围中唯一的 name 属性吗？属性名又来自哪个对象？

通过重命名属性可避免这些问题。

```js
const url = "http://localhost:8080/api/v1/organizers/1"
const response = await axios.get(url)
const {name: organizerName} = response.data
```

这段代码变得更具可读性。每个人都知道变量是 organizer 的名字。

<br/>
<br/>
<br/>

转载自：[https://juejin.cn/post/6904047941883789319](https://juejin.cn/post/6904047941883789319)

